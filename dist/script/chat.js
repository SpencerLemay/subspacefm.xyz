const socket=io.connect("https://subspacefm.xyz",{resource:"/chat"}),messageContainer=document.getElementById("message-container"),messageForm=document.getElementById("send-container"),messageInput=document.getElementById("message-input");var sessionid;function appendMessage(e){const s=document.createElement("div");s.innerText=e,messageContainer.append(s),$("#message-container").scrollTop($("#message-container")[0].scrollHeight)}socket.emit("newUser"),socket.on("getSession",(e=>{sessionid=e.sessionid,name=e.name})),socket.on("user-connected",(e=>{appendMessage(`Welcome ${e.name}`)})),socket.on("chat-message",(e=>{appendMessage(`${e.name}: ${e.message}`)})),socket.on("user-connected",(e=>{appendMessage(`${e.name} connected`)})),socket.on("error-message",(e=>{appendMessage(`${e.message}`)})),socket.on("user-name-change",(e=>{appendMessage(`${e.oldname} changed name to ${e.name}.`)})),socket.on("user-disconnected",(e=>{appendMessage(`${e} disconnected`)})),socket.on("help",(e=>{appendMessage(`${e.message}`)})),messageForm.addEventListener("submit",(e=>{if(e.preventDefault(),"!"==messageInput.value[0]){var s=messageInput.value+" ",n=s.search(" "),a=s.substring(1,n),t=s.substring(n+1,s.length);return o={sessionid:sessionid,cmd:a,args:t},socket.emit("command",o),void(messageInput.value="")}var o={sessionid:sessionid,message:messageInput.value};appendMessage(`You: ${o.message}`),socket.emit("send-chat-message",o),messageInput.value=""}));