var cors=require("cors");const socket=io.connect("https://subspacefm.xyz",{resource:"/chat"}),messageContainer=document.getElementById("message-container"),messageForm=document.getElementById("send-container"),messageInput=document.getElementById("message-input");var sessionid;socket.emit("newUser");var name="default";function appendMessage(e){const s=document.createElement("div");s.innerText=e,messageContainer.append(s)}appendMessage("Enter Name"),socket.on("getSession",(e=>{sessionid=e.sessionid,name=e.name})),socket.on("user-connected",(e=>{appendMessage(`Welcome ${e.name}`)})),socket.on("chat-message",(e=>{appendMessage(`${e.name}: ${e.message}`)})),socket.on("user-connected",(e=>{appendMessage(`${e} connected`)})),socket.on("user-disconnected",(e=>{appendMessage(`${e} disconnected`)})),messageForm.addEventListener("submit",(e=>{if(e.preventDefault(),"default"===name)return name=messageInput.value,socket.emit("new-user",name),appendMessage("Welcome  "+name),void(messageInput.value="");const s=messageInput.value;appendMessage(`You: ${s}`),socket.emit("send-chat-message",s),messageInput.value=""}));