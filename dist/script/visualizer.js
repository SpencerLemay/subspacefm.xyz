var gradient;window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var visualizerStart=function(){if(null==player.started){player.started=1;var t=new AudioContext,e=t.createAnalyser();t.createMediaElementSource(player.audioElement).connect(e),e.connect(t.destination);new Uint8Array(e.frequencyBinCount);var n,a=document.getElementById("canvas"),o=a.width,r=a.height-2,i=800/12,l=[];t=a.getContext("2d"),(n=t.createLinearGradient(0,0,0,300)).addColorStop(1,"#333"),n.addColorStop(.5,"#999"),n.addColorStop(0,"#fff"),function a(){var d=new Uint8Array(e.frequencyBinCount);e.getByteFrequencyData(d);var c=Math.round(d.length/i);t.clearRect(0,0,o,r);for(var u=0;u<i;u++){var f=d[u*c];l.length<Math.round(i)&&l.push(f),t.fillStyle="#000",f<l[u]?t.fillRect(12*u,r- --l[u],10,2):(t.fillRect(12*u,r-f,10,2),l[u]=f),t.fillStyle=n,t.fillRect(12*u,r-f+2,10,r)}requestAnimationFrame(a)}()}};$((function(){$("#play").click((function(){visualizerStart()}))}));