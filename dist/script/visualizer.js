window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var visualizerStart=function(){var e=new AudioContext,t=e.createAnalyser();e.createMediaElementSource(player.audioElement).connect(t),t.connect(e.destination);var a,n,o,r;new Uint8Array(t.frequencyBinCount);switch(localStorage.getItem("theme")){case"theme-dark":o=[1,"#717e80"],n=[.5,"#3d4445"],a=[0,"#131b1c"],r="#131b1c";break;default:case"theme-light":o=[1,"#000"],n=[.5,"#777"],a=[0,"#bbb"],r="#000";break;case"theme-pink":o=[1,"#af9bbb"],n=[.5,"#c5bdc9"],a=[0,"#fff"],r="#fff";break;case"theme-green":o=[1,"#bfcabc"],n=[.5,"#96b68d"],a=[0,"#fff"],r="#538740";break;case"theme-yellow":o=[1,"#723b04"],n=[.5,"#c89c4d"],a=[0,"#c89c4d"],r="#723b04"}var c,i=document.getElementById("canvas"),l=i.width,d=i.height-2,f=r,u=800/12,b=[];e=i.getContext("2d"),(c=e.createLinearGradient(0,0,0,300)).addColorStop(o[0],o[1]),c.addColorStop(n[0],n[1]),c.addColorStop(a[0],a[1]),function a(){var n=new Uint8Array(t.frequencyBinCount);t.getByteFrequencyData(n);var o=Math.round(n.length/u);e.clearRect(0,0,l,d);for(var r=0;r<u;r++){var i=n[r*o];b.length<Math.round(u)&&b.push(i),e.fillStyle=f,i<b[r]?e.fillRect(12*r,d- --b[r],10,2):(e.fillRect(12*r,d-i,10,2),b[r]=i),e.fillStyle=c,e.fillRect(12*r,d-i+2,10,d)}requestAnimationFrame(a)}()};$((function(){$("#play").click((function(){visualizerStart()}))}));