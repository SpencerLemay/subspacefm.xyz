window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var visualizerStart=function(){var e,t,a,n;switch(localStorage.getItem("theme")){case"theme-dark":a=[1,"#717e80"],t=[.5,"#3d4445"],e=[0,"#131b1c"],n="#131b1c";break;default:case"theme-light":a=[1,"#000"],t=[.5,"#777"],e=[0,"#bbb"],n="#000";break;case"theme-pink":a=[1,"#af9bbb"],t=[.5,"#c5bdc9"],e=[0,"#fff"],n="#fff"}var r,i=document.getElementById("canvas"),o=i.width,l=i.height-2,c=n,d=800/12,u=[];if(f=i.getContext("2d"),(r=f.createLinearGradient(0,0,0,300)).addColorStop(a[0],a[1]),r.addColorStop(t[0],t[1]),r.addColorStop(e[0],e[1]),null==player.started){player.started=1;var f=new AudioContext,h=f.createAnalyser();f.createMediaElementSource(player.audioElement).connect(h),h.connect(f.destination);new Uint8Array(h.frequencyBinCount);!function e(){var t=new Uint8Array(h.frequencyBinCount);h.getByteFrequencyData(t);var a=Math.round(t.length/d);f.clearRect(0,0,o,l);for(var n=0;n<d;n++){var i=t[n*a];u.length<Math.round(d)&&u.push(i),f.fillStyle=c,i<u[n]?f.fillRect(12*n,l- --u[n],10,2):(f.fillRect(12*n,l-i,10,2),u[n]=i),f.fillStyle=r,f.fillRect(12*n,l-i+2,10,l)}requestAnimationFrame(e)}()}};$((function(){$("#dark").click((function(){visualizerStart()})),$("#play").click((function(){visualizerStart()}))}));