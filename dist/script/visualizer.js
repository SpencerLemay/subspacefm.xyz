window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var visualizerStart=function(){if(1!=player.started){player.started=1;var e=new AudioContext,t=e.createAnalyser();e.createMediaElementSource(player.audioElement).connect(t),t.connect(e.destination);var a,n,r,o;new Uint8Array(t.frequencyBinCount);b();var c,i=document.getElementById("canvas"),d=i.width,l=i.height-2,f=800/12,u=[];e=i.getContext("2d"),(c=e.createLinearGradient(0,0,0,300)).addColorStop(r[0],r[1]),c.addColorStop(n[0],n[1]),c.addColorStop(a[0],a[1]),function i(){var h=new Uint8Array(t.frequencyBinCount);t.getByteFrequencyData(h);var s=Math.round(h.length/f);e.clearRect(0,0,d,l);for(var y=0;y<f;y++){var w=h[y*s];u.length<Math.round(f)&&u.push(w),e.fillStyle=o,w<u[y]?e.fillRect(12*y,l- --u[y],10,2):(e.fillRect(12*y,l-w,10,2),u[y]=w),e.fillStyle=c,e.fillRect(12*y,l-w+2,10,l)}2==player.started&&(e.clearRect(0,0,d,l),b(),c=null,(c=e.createLinearGradient(0,0,0,300)).addColorStop(r[0],r[1]),c.addColorStop(n[0],n[1]),c.addColorStop(a[0],a[1])),requestAnimationFrame(i)}()}function b(e,t,a,n){switch(localStorage.getItem("theme")){case"theme-dark":[1,"#717e80"],[.5,"#3d4445"],[0,"#131b1c"],"#131b1c";break;default:case"theme-light":[1,"#000"],[.5,"#777"],[0,"#bbb"],"#000";break;case"theme-pink":[1,"#af9bbb"],[.5,"#c5bdc9"],[0,"#fff"],"#fff";break;case"theme-green":[1,"#bfcabc"],[.5,"#96b68d"],[0,"#fff"],"#538740";break;case"theme-yellow":[1,"#723b04"],[.5,"#c89c4d"],[0,"#c89c4d"],"#723b04"}}};$((function(){$("#play").click((function(){visualizerStart()}))}));