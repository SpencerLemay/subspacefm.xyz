var cors=require("cors");const io=require("socket.io")(3e3,{cors:{origin:"*",methods:["GET","POST"]}}),users={};io.on("connection",(e=>{e.on("new-user",(s=>{users[e.id]=s,console.log("USER CONNECTED: "+s),e.broadcast.emit("user-connected",s)})),e.on("send-chat-message",(s=>{console.log("USER SAID: "+s),e.broadcast.emit("chat-message",{message:s,name:users[e.id]})})),e.on("disconnect",(()=>{console.log("DISCONNECTED "+users[e.id]),e.broadcast.emit("user-disconnected",users[e.id]),delete users[e.id]}))}));