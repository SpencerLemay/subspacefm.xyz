const io=require("socket.io")(httpServer,{cors:{origin:"http://localhost:8080",methods:["GET","POST"]}});httpServer.listen(3e3);const users={};io.on("connection",(e=>{e.on("new-user",(s=>{users[e.id]=s,e.broadcast.emit("user-connected",s),console.log("USER CONNECTED: "+s)})),e.on("send-chat-message",(s=>{e.broadcast.emit("chat-message",{message:s,name:users[e.id]}),console.log("USER SAID: "+s)})),e.on("disconnect",(()=>{console.log("DISCONNECTED "+users[e.id]),e.broadcast.emit("user-disconnected",users[e.id]),delete users[e.id]}))}));